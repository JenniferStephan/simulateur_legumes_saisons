<div class="container mt-3">



  <div class="searchbar form-inline search-form-control">
      <%= simple_form_for(@simulation) do |f| %>
      <%= f.input :ask_month, collection: Simulation::MONTH, label: false, prompt: "ğŸ“… Quel mois sommes-nous ?", class: "dropdown-menu" %>
  </div>

<h5 class="mb-4">ğŸ³ Que souhaitez-vous cuisiner ou manger ?</h5>

        <div class="category-choices">
          <% Simulation::FL.each_with_index do |vege, index| %>
          <label>
            <input type="radio" name="demo" class="card-input-element d-none" value="<%= vege %>" name="simulation[activity_ids][]" id="simulation_activity_ids_<%= vege %>">
            <div for="simulation_vege_ids_<%= vege %>" class="card category-choice  bg-light d-flex flex-row justify-content-between align-items-center">
              <%= vege[0..9] %>
            <%= image_tag("#{vege}.png") %>
            </div>

          </label>
          <% end %>
        </div>

        <%= f.submit "Valider ğŸ™ƒ", class: "btn-valider"%>

      <button class="btn" type="submit" data-toggle="modal" data-target="#exampleModal">
          Est-ce que c'est la saison ? ğŸŒ¾
      </button>

      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content m-4">
          <div class="m-3">
                <h5>Est-ce que c'est conseillÃ© de manger un.e <%= @simulation.ask_vege %> en <%= @simulation.ask_month %> ? </h5>

                  <% if @simulation.answer %>

                    <p>ğŸ’š Oui, aucun souci ! <%= @simulation.ask_month %> fait partie des mois oÃ¹ le.a <%= @simulation.ask_vege %> est de saison.</p>
                    <span></span>
                    <p>Des conseils et recettes sur <%= link_to "Marmiton", "https://www.marmiton.org/recettes/recherche.aspx?aqt=#{@simulation.ask_vege}", target: "_blank" %></p>


                    <% else %>


                    <% tableau_preference = Vegetable.select { |fl| fl.months.include?(@simulation.ask_month) }.shuffle.first(7).map { |fl2| [].push(fl2.label) }.flatten  %>
                    <p>âš ï¸ Le <%= @simulation.ask_vege %> n'est pas de saison en <%= @simulation.ask_month %>. Choisis plutÃ´t parmi : </p>
                    <ul>
                      <% tableau_preference.each do |e| %>
                      <li><%= e %></li>
                      <% end %>
                    </ul>

                  <% end %>

                  <%= link_to "Nouvelle simulation", new_simulation_path, class: "btn-modale new"%>


          </div>
        </div>
      </div>
    </div>


      <% end %>
<!-- <h4><%= @simulation.id %></h4>
  <h4><%= @simulation.ask_month %></h4>
  <h4><%= @simulation.ask_vege %></h4>
  <h4><%= @simulation.answer %></h4> -->

</div>
